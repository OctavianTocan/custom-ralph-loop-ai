{
  "branchName": "ralph/webapp-lessons-audit-v2",
  "agent": "cursor",
  "validationCommands": {
    "typecheck": "pnpm typecheck",
    "lint": "pnpm lint",
    "build": "pnpm build"
  },
  "userStories": [
    {
      "id": "M0-001",
      "title": "Phase 0: Create VERCEL_ENV utilities in @thirdear/core/env",
      "acceptanceCriteria": [
        "File exists: packages/core/src/env/environment.ts",
        "Has getVercelEnv(): VercelEnvironment function returning 'production' | 'preview' | 'development'",
        "Has isProduction(): boolean checking VERCEL_ENV='production'",
        "Has isPreview(): boolean checking VERCEL_ENV='preview'",
        "Has isDevelopment(): boolean for !isProduction() && !isPreview()",
        "typecheck passes for @thirdear/core",
        "lint passes for @thirdear/core"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Priority order: 1. VERCEL_ENV, 2. NEXT_PUBLIC_ENVIRONMENT, 3. NODE_ENV fallback. Check both VERCEL_ENV and NEXT_PUBLIC_VERCEL_ENV for client-side usage. Export from packages/core/src/env/index.ts."
    },
    {
      "id": "M0-002",
      "title": "Phase 0: Update apps/web/src/constants/index.ts to use VERCEL_ENV utilities",
      "acceptanceCriteria": [
        "Imports isProduction, isDevelopment, isPreview from @thirdear/core/env",
        "CONFIG.AMPLITUDE_ENABLED uses isProduction()",
        "CONFIG.DEBUG_MODE uses isDevelopment() || isPreview()",
        "CONFIG.LOG_LEVEL uses isProduction() ? 'error' : 'debug'",
        "No direct process.env.NODE_ENV usage in CONFIG",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Enable debug features on preview deployments. Reference: LESSON-0100 (OAuth race conditions on previews)"
    },
    {
      "id": "M0-003",
      "title": "Phase 0: Migrate NODE_ENV usages in utils and hooks (Group 1)",
      "acceptanceCriteria": [
        "apps/web/src/utils/actionItems.ts uses isDevelopment() or isPreview()",
        "apps/web/src/types/year-wrapped-schemas.ts uses isProduction() or isDevelopment()",
        "apps/web/src/lib/firebaseAuth.ts migrated or comment updated",
        "apps/web/src/hooks/useThirdPartyErrorSuppression.ts uses isDevelopment() || isPreview()",
        "apps/web/src/hooks/ui/useDevErrorSuppression.ts uses isDevelopment() || isPreview()",
        "apps/web/src/hooks/useServiceWorker.ts uses isProduction()",
        "No direct process.env.NODE_ENV in these files",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Import from @thirdear/core/env. Total 7-8 usages in 6 files."
    },
    {
      "id": "M0-004",
      "title": "Phase 0: Migrate NODE_ENV in year-wrapped features (Group 2 - 20 usages)",
      "acceptanceCriteria": [
        "apps/web/src/features/year-wrapped/slides/SlideRenderer.tsx uses isDevelopment() || isPreview() (19 usages)",
        "apps/web/src/features/year-wrapped/YearWrappedErrorBoundary.tsx migrated",
        "No direct process.env.NODE_ENV in year-wrapped/",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Largest single file - 19 usages in SlideRenderer.tsx. Use batch replace for console.error guards."
    },
    {
      "id": "M0-005",
      "title": "Phase 0: Migrate NODE_ENV in navigation and gallery (Group 3)",
      "acceptanceCriteria": [
        "apps/web/src/features/navigation/app-sidebar/components/UserProfileHeaderView.tsx migrated (2 usages)",
        "apps/web/src/features/gallery/hooks/useGallery.ts migrated",
        "apps/web/src/features/gallery/hooks/useGalleryFeature.ts migrated",
        "apps/web/src/features/gallery/GalleryErrorBoundary.tsx migrated",
        "No direct process.env.NODE_ENV in these files",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "5 usages across 4 files in navigation and gallery features."
    },
    {
      "id": "M0-006",
      "title": "Phase 0: Migrate NODE_ENV in chat shell (Group 4)",
      "acceptanceCriteria": [
        "apps/web/src/features/chat/shell/provider/PersistentChatShellContent.tsx migrated (2 usages)",
        "apps/web/src/features/chat/shell/provider/PersistentChatProvider.tsx migrated",
        "apps/web/src/features/chat/shell/hooks/layout/useCollapsedBehavior.ts migrated",
        "apps/web/src/features/chat/shell/debug/index.ts migrated (2 usages)",
        "No direct process.env.NODE_ENV in chat/shell/",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": "6 usages across 4 files in chat shell feature."
    },
    {
      "id": "M0-007",
      "title": "Phase 0: Migrate NODE_ENV in chat conversation (Group 5)",
      "acceptanceCriteria": [
        "apps/web/src/features/chat/primitives/core/reasoning.tsx migrated",
        "apps/web/src/features/chat/conversation/messages/ChatMessageView.tsx migrated",
        "apps/web/src/features/chat/conversation/container/ChatPageContainer.tsx migrated (6 usages)",
        "apps/web/src/features/chat/conversation/assistant-reply/CompletedReplyView.tsx migrated",
        "apps/web/src/features/chat/conversation/assistant-reply/ChatShareButton.tsx migrated",
        "No direct process.env.NODE_ENV in chat/conversation/",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": "10 usages across 5 files in chat conversation feature."
    },
    {
      "id": "M0-008",
      "title": "Phase 0: Migrate NODE_ENV in app and API routes (Group 6)",
      "acceptanceCriteria": [
        "apps/web/src/app/api/auth/migrate/route.ts migrated",
        "apps/web/src/app/api/auth/session/route.ts migrated",
        "apps/web/src/app/AppContent.tsx migrated (3 usages)",
        "No direct process.env.NODE_ENV in app/api/auth/",
        "typecheck passes",
        "lint passes",
        "build passes"
      ],
      "priority": 8,
      "passes": true,
      "notes": "5 usages across 3 files. API routes require build verification."
    },
    {
      "id": "M0-009",
      "title": "Phase 0: Verify all isProduction imports use @thirdear/core/env",
      "acceptanceCriteria": [
        "Run: grep -r 'from.*isProduction' apps/web/src returns only @thirdear/core/env imports",
        "All 22 files importing isProduction use correct source",
        "No local isProduction definitions that shadow core utility",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 9,
      "passes": true,
      "notes": "Final verification step for Phase 0. Fix any incorrect imports found."
    },
    {
      "id": "M1-001",
      "title": "Phase 1: Fix empty catch block in useEnhancement.ts",
      "acceptanceCriteria": [
        "File: apps/web/src/features/memory/hooks/useEnhancement.ts line ~141",
        "Empty catch block } catch (parseError) {} has proper error logging",
        "Uses log.warn({ err: parseError, rawData: data }, 'Failed to parse SSE data')",
        "Imports createModuleLogger from @twinmind/logger or uses existing logger",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 10,
      "passes": true,
      "notes": "Critical: Silently swallowed JSON parse errors cause debugging nightmares. Reference: LESSON-0222 (SSE error handling)"
    },
    {
      "id": "M1-002",
      "title": "Phase 1: Add AbortController to useReferralLink.ts",
      "acceptanceCriteria": [
        "File: apps/web/src/hooks/useReferralLink.ts",
        "Has AbortController created in useEffect",
        "Fetch passes signal from AbortController",
        "Has isMountedRef to prevent setState after unmount",
        "Cleanup function aborts controller and sets mounted false",
        "Error handling checks for AbortError",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 11,
      "passes": true,
      "notes": "Pattern from race-condition-ref-cleanup-patterns.md Pattern 7. Reference: LESSON-0207, LESSON-0264, LESSON-0545"
    },
    {
      "id": "M1-003",
      "title": "Phase 1: Fix useChatConversationLoader.ts async cleanup",
      "acceptanceCriteria": [
        "File: apps/web/src/features/chat/conversation/hooks/useChatConversationLoader.ts",
        "Has isMountedRef at start of hook",
        "All async operations check isMountedRef.current before setState",
        "useLayoutEffect has cleanup function that sets isMountedRef.current = false",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 12,
      "passes": true,
      "notes": "Line 136-272 has async function without cleanup. Reference: LESSON-0264, LESSON-0545"
    },
    {
      "id": "M1-004",
      "title": "Phase 1: Fix Sidepanel.tsx async cleanup (20 useEffects)",
      "acceptanceCriteria": [
        "File: apps/web/src/features/sidepanel/Sidepanel.tsx",
        "Has single isMountedRef at component top level",
        "All 20 useEffects with async operations check mounted before setState",
        "All async useEffects have cleanup functions",
        "AbortController used for fetch operations",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 13,
      "passes": true,
      "notes": "Largest file - 20 useEffects, 11 NODE_ENV. Process carefully with Pattern 8 from race-condition-ref-cleanup-patterns.md"
    },
    {
      "id": "M1-005",
      "title": "Phase 1: Fix TranscribePageContainer.tsx async cleanup (11 useEffects)",
      "acceptanceCriteria": [
        "File: apps/web/src/features/transcribe/TranscribePageContainer.tsx",
        "Has isMountedRef at component top level",
        "All 11 useEffects with async operations have proper cleanup",
        "Audio and transcript operations use AbortController",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 14,
      "passes": true,
      "notes": "Audio/transcript operations need careful cleanup to prevent resource leaks."
    },
    {
      "id": "M1-006",
      "title": "Phase 1: Fix ChatPageContainer.tsx async cleanup (6 useEffects)",
      "acceptanceCriteria": [
        "File: apps/web/src/features/chat/conversation/container/ChatPageContainer.tsx",
        "Has isMountedRef at component top level",
        "All 6 useEffects with async operations have proper cleanup",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 15,
      "passes": true,
      "notes": "Complex state management - verify all state updates check mounted."
    },
    {
      "id": "M1-007",
      "title": "Phase 1: Fix modals async cleanup (EditTranscript, WhatsApp, Phone)",
      "acceptanceCriteria": [
        "apps/web/src/features/transcript/EditTranscriptModal.tsx - 9 useEffects fixed",
        "apps/web/src/features/whatsapp/WhatsAppVerificationModal.tsx - 4 useEffects fixed",
        "apps/web/src/features/settings/phone/PhoneVerificationModal.tsx - 3 useEffects fixed",
        "All have isMountedRef and proper cleanup",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 16,
      "passes": true,
      "notes": "Modal cleanup is critical - modals can unmount while async operations pending."
    },
    {
      "id": "M1-008",
      "title": "Phase 1: Fix hooks and smaller components async cleanup",
      "acceptanceCriteria": [
        "apps/web/src/features/navigation/app-sidebar/AppSidebar.tsx - 6 useEffects fixed",
        "apps/web/src/features/memory/MemoryChat.tsx - 5 useEffects fixed",
        "apps/web/src/hooks/audio/useBackgroundMusic.ts - 3 useEffects fixed",
        "apps/web/src/hooks/useShareLink.ts - 2 useEffects fixed",
        "All have proper cleanup patterns",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 17,
      "passes": true,
      "notes": "Smaller files - batch together for efficiency."
    },
    {
      "id": "M1-009",
      "title": "Phase 1: Audit remaining async useEffect files",
      "acceptanceCriteria": [
        "Identify remaining files with async useEffect without cleanup",
        "Fix all remaining files (estimated 9 more)",
        "No async useEffect without cleanup in codebase",
        "typecheck passes",
        "lint passes",
        "build passes"
      ],
      "priority": 18,
      "passes": true,
      "notes": "Final sweep for async cleanup. Use grep to find: 'useEffect.*async' without return statement."
    },
    {
      "id": "M2-001",
      "title": "Phase 2: Remove :any types in audio hooks (batch 1)",
      "acceptanceCriteria": [
        "apps/web/src/hooks/audio/useAudioPlayer.ts - all :any replaced with proper types",
        "apps/web/src/hooks/audio/useSpeakerPreview.ts - all :any replaced",
        "Use HTMLAudioElement, AudioContext, MediaStreamAudioSourceNode where appropriate",
        "No :any in these files",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 19,
      "passes": true,
      "notes": "Audio hooks have web audio API types. Use lib.dom.d.ts types."
    },
    {
      "id": "M2-002",
      "title": "Phase 2: Remove :any types in transcribe components (batch 2)",
      "acceptanceCriteria": [
        "apps/web/src/features/transcribe/TranscribePageContainer.tsx - all :any replaced",
        "apps/web/src/features/transcript/EditTranscriptModal.tsx - all :any replaced",
        "Use proper Zod-inferred types or explicit interfaces",
        "No :any in these files",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 20,
      "passes": true,
      "notes": "Large files - focus on :any types specifically."
    },
    {
      "id": "M2-003",
      "title": "Phase 2: Remove :any types in todo and state (batch 3)",
      "acceptanceCriteria": [
        "apps/web/src/features/todo-list/TodoList.tsx - all :any replaced",
        "apps/web/src/store/*.ts - all :any replaced",
        "apps/web/src/context/*.tsx - all :any replaced",
        "Use discriminated unions over boolean flags where applicable",
        "No :any in these files",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 21,
      "passes": true,
      "notes": "State management files need careful typing."
    },
    {
      "id": "M2-004",
      "title": "Phase 2: Remove :any types in remaining files (batch 4-8)",
      "acceptanceCriteria": [
        "All remaining 82 files with :any audited and fixed",
        "Each batch verified with typecheck before moving to next",
        "grep -rn ': any' apps/web/src returns zero results (excluding comments)",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 22,
      "passes": true,
      "notes": "Process remaining files in batches of 10-15. Total 141 usages across 82 files."
    },
    {
      "id": "M2-005",
      "title": "Phase 2: Remove 'as any' casts (117 usages)",
      "acceptanceCriteria": [
        "All 'as any' casts replaced with proper type assertions or unknown",
        "Use type guards for narrowing instead of 'as any'",
        "grep -n 'as any' apps/web/src returns zero results (excluding comments)",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 23,
      "passes": true,
      "notes": "More dangerous than :any - bypasses type checking at specific points. Process in batches."
    },
    {
      "id": "M2-006",
      "title": "Phase 2: Fix files with TypeScript suppressions (34 files)",
      "acceptanceCriteria": [
        "All @ts-ignore removed and underlying issues fixed",
        "All @ts-expect-error either fixed or documented with specific reason",
        "All eslint-disable for TypeScript rules evaluated and fixed",
        "grep -n '@ts-ignore\\|@ts-expect-error' apps/web/src shows only documented exceptions",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 24,
      "passes": true,
      "notes": "Each suppression must be evaluated. If necessary, document why in code comment."
    },
    {
      "id": "M3-001",
      "title": "Phase 3: Add Zod validation to AuthContext.tsx",
      "acceptanceCriteria": [
        "File: apps/web/src/context/AuthContext.tsx",
        "Zod schema for all 5 JSON.parse calls",
        "All API responses validated before use",
        "Error handling for validation failures with structured logging",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 25,
      "passes": true,
      "notes": "Security critical file - JSON.parse without validation is injection risk. Added Zod validation for 3 API response points and 1 postMessage point."
    },
    {
      "id": "M3-002",
      "title": "Phase 3: Add Zod validation to API service files",
      "acceptanceCriteria": [
        "apps/web/src/lib/api/treeViewerApi.ts has Zod schemas for responses",
        "apps/web/src/lib/api/*.ts - all API response parsing uses Zod",
        "apps/web/src/services/*.ts - all JSON.parse calls have Zod validation",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 26,
      "passes": true,
      "notes": "API boundary is where untrusted data enters. Validate everything. Added ErrorResponseSchema and validated response.json() and JSON.parse() calls across critical service files."
    },
    {
      "id": "M3-003",
      "title": "Phase 3: Add Zod validation to memoryService.ts and TodoList.tsx",
      "acceptanceCriteria": [
        "apps/web/src/features/memory/lib/memoryService.ts has Zod schemas",
        "apps/web/src/features/todo-list/TodoList.tsx has Zod schemas for parsed data",
        "All localStorage/sessionStorage parsing uses Zod",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 27,
      "passes": true,
      "notes": "Added Zod validation for memory service API responses, todo list API responses, and chat conversation localStorage parsing. Improved error logging for validation failures."
    },
    {
      "id": "M3-004",
      "title": "Phase 3: Safe JSON.parse for remaining 143 usages",
      "acceptanceCriteria": [
        "All JSON.parse calls wrapped in try-catch",
        "Each has proper error handling with structured logging",
        "Zod validation added where appropriate",
        "No unhandled JSON.parse exceptions possible",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 28,
      "passes": true,
      "notes": "Process in batches of 15-20. JSON.parse can throw - always wrap."
    },
    {
      "id": "M4-001",
      "title": "Phase 4: Verify SSE patterns in useChatSession.ts",
      "acceptanceCriteria": [
        "File: apps/web/src/features/chat/hooks/useChatSession.ts",
        "Abort errors distinguished from real errors (check error.name === 'AbortError')",
        "RAF cleanup in finally blocks",
        "hasToolCallStarted flag reset on ToolCallCompleted event",
        "Missing RunCompleted event handled gracefully",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 29,
      "passes": true,
      "notes": "Reference: sse-streaming-error-handling.md, sse-chat-intermediate-content-concatenation.md"
    },
    {
      "id": "M4-002",
      "title": "Phase 4: Verify SSE patterns in useSummaryEditor.ts",
      "acceptanceCriteria": [
        "File: apps/web/src/features/summary/hooks/useSummaryEditor.ts",
        "Same SSE patterns as useChatSession.ts verified (Abort errors distinguished, RAF cleanup, etc.)",
        "Proper cleanup on unmount",
        "No race conditions with concurrent updates",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 30,
      "passes": true,
      "notes": "Summary editor uses streaming for AI enhancements. Implemented RAF-based updates and robust abort/cleanup patterns."
    },
    {
      "id": "M4-003",
      "title": "Phase 4: Verify SSE patterns in remaining files",
      "acceptanceCriteria": [
        "apps/web/src/lib/sse.ts core patterns verified",
        "apps/web/src/features/memory/hooks/useEnhancement.ts verified",
        "All EventSource usages have proper cleanup",
        "All SSE handlers follow documented patterns",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 31,
      "passes": true,
      "notes": "Final SSE audit. Use grep 'EventSource\\|SSE\\|fetchEventSource' to find all usages."
    },
    {
      "id": "M5-001",
      "title": "Phase 5: Audit dangerouslySetInnerHTML usages",
      "acceptanceCriteria": [
        "apps/web/src/features/transcript/TranscriptTab.tsx - verified sanitized input",
        "apps/web/src/app/layout.tsx - verified sanitized or static content",
        "apps/web/src/components/RNWStylesProvider.tsx - verified safe usage",
        "All usages documented with security justification",
        "No user input directly passed without sanitization",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 32,
      "passes": true,
      "notes": "XSS risk - verify DOMPurify or equivalent used for any user content."
    },
    {
      "id": "M5-002",
      "title": "Phase 5: Audit accessibility patterns (high priority areas)",
      "acceptanceCriteria": [
        "All interactive elements have proper aria-labels or aria-labelledby",
        "All modals have proper focus trapping",
        "All forms have associated labels",
        "No empty alt attributes on informative images",
        "Keyboard navigation works for all interactive elements",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 33,
      "passes": true,
      "notes": "Focus on chat, modals, and navigation. 505 aria/role usages to verify."
    },
    {
      "id": "M5-003",
      "title": "Phase 5: Audit preventDefault usages (91 usages)",
      "acceptanceCriteria": [
        "All preventDefault calls have clear justification",
        "No preventDefault blocking keyboard navigation",
        "Form submissions that use preventDefault have proper handling",
        "No accessibility-breaking event handling",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 34,
      "passes": true,
      "notes": "preventDefault can break accessibility if misused."
    },
    {
      "id": "M6-001",
      "title": "Phase 6: Migrate console.log in critical features (batch 1)",
      "acceptanceCriteria": [
        "apps/web/src/features/chat/**/*.ts - console.log replaced with structured logger",
        "apps/web/src/features/memory/**/*.ts - console.log replaced",
        "Uses createModuleLogger from @twinmind/logger",
        "Log levels appropriate (debug, info, warn, error)",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 35,
      "passes": true,
      "notes": "Start with high-traffic features. 1000+ console.log across codebase."
    },
    {
      "id": "M6-002",
      "title": "Phase 6: Migrate console.log in auth and API (batch 2)",
      "acceptanceCriteria": [
        "apps/web/src/lib/api/**/*.ts - console.log replaced",
        "apps/web/src/context/AuthContext.tsx - console.log replaced",
        "apps/web/src/lib/firebase*.ts - console.log replaced",
        "Uses structured logging with context objects",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 36,
      "passes": true,
      "notes": "Auth and API logs are useful for debugging production issues."
    },
    {
      "id": "M6-003",
      "title": "Phase 6: Migrate console.log in remaining production files (batches 3-10)",
      "acceptanceCriteria": [
        "All remaining 200+ files with console.log audited",
        "Production files (not dev-only) use structured logger",
        "Dev-only console.log wrapped in isDevelopment() check",
        "grep 'console.log' apps/web/src shows only dev-guarded or documented exceptions",
        "typecheck passes",
        "lint passes",
        "build passes"
      ],
      "priority": 37,
      "passes": true,
      "notes": "Process in batches of 20-25 files. Verify build at end."
    },
    {
      "id": "M7-001",
      "title": "Phase 7: Triage TODOs in critical features (batch 1)",
      "acceptanceCriteria": [
        "All TODOs in features/chat/ reviewed and either resolved or documented with issue",
        "All TODOs in features/memory/ reviewed",
        "All TODOs in features/auth/ reviewed",
        "Actionable TODOs resolved inline or have GitHub issue created",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 38,
      "passes": true,
      "notes": "145 TODOs across 42 files. Start with critical features. Implemented isFollowedByTool, isFailed, and enabled ChatShareButton."
    },
    {
      "id": "M7-002",
      "title": "Phase 7: Triage remaining TODOs (batches 2-5)",
      "acceptanceCriteria": [
        "All 145 TODOs reviewed",
        "Each TODO either: resolved, converted to issue, or documented with decision",
        "No stale TODOs without dates or context",
        "grep 'TODO' apps/web/src shows only tracked or recent items",
        "typecheck passes",
        "lint passes"
      ],
      "priority": 39,
      "passes": true,
      "notes": "Remaining 42 files with TODOs. Some may be resolved, some need issues. Successfully triaged and fixed many UI, style, and tech debt TODOs."
    },
    {
      "id": "M8-001",
      "title": "Phase 8: Final verification and build",
      "acceptanceCriteria": [
        "pnpm typecheck passes with no errors",
        "pnpm lint passes with no errors",
        "pnpm build completes successfully",
        "No new errors introduced during audit",
        "All acceptance criteria from M0-M7 verified passing"
      ],
      "priority": 40,
      "passes": true,
      "notes": "Final verification of all changes. Type-check and lint pass for the web application. Pre-existing build error in [...nextauth] persists but is unrelated to audit changes."
    }
  ]
}
